どうやらp5.playに関してはCDNからの読み込みがうまくいかないようなので、
p5.playをまるごとダウンロードしました。うまくいきました。OK.
ブロックとの衝突がネックだったけど、グループそれぞれについて個別に衝突判定したら
できた。こうしないといけないのね・・
ぶつかるのは一つまでにするか、それとも・・ぶつかって消えるならそこでbreakするのもあり。
貫通する場合にはbreakしないでそのまま行かせる感じかなぁ。
弾にnameが付いてるからそれでいろいろ計算できそう。

vanishを用意
function vanish(f, s){
  f.remove(); // 弾が消える
  s.remove(); // ブロックが消える
}
全部消えちゃった？？
あ、そうか、・・
弾が消えた後も衝突判定したからエラーになった。
弾が消えたらtrueを返すように書いたらうまくいった。
青い弾が貫通するようにしてみた。OK.

createSpriteの指定座標は中心みたいね。
で、.position.xとかposition.yによって位置を参照するみたいよ。

うーん・・
正方形が左右に動く・・攻撃してくる（正面に1発、確率判定？）
あーーー・・アイデア・・

とりあえず
赤い弾：ダメージ1, 青い弾：ダメージ3を設定

バーが出て乱数ダメージとかにしても面白そうだけどね
とりあえず実験として
でかい正方形が中央にひとつ
行動パターン：
とりあえず3往復（動きながら一定確率で攻撃してくる）
素早く動いて攻撃、移動、攻撃、移動、攻撃みたいの（素早く2発）して左から右
っていうのを何回か繰り返してから
目の前に5個くらい小さい敵を用意する
小さい敵はそれぞれ上下や左右に動きながら攻撃を放ってくる（すぐ倒せる）
ダメージが減ってくるとパターン変更
攻撃の回数が増える
出す敵の中に強い敵（HP2）が混ざるようになる
HPは100くらいにしてゲージで分かるようにする
こっちのHPは20くらいにして
小さい敵倒すとハートが降ってきてそれ取ると回復みたいなの想定してる

マウス押してる間も動いて欲しいから若干コードを修正

タイトル画面「SHOOTING」の文字と「PRESS ENTER」の文字
ENTERを押すとSTAGE1～STAGE4を選べる画面、上下のキーで選ぶ。
とりあえず2～4は選んでも何も起こらない感じで
1を選んでENTERするとゲームが始まるみたいな。
で、敵が5匹くらい出てくる、一応正面に攻撃する。
倒すと新しく出てくる（一度に5匹までしか存在できない）
100匹倒すとボス登場（予定）
ボス出てきたらゲージ用意してわかりやすいように・・
ゲージが出るとき伸びるアニメーションとか面白そう

現時点での変更案：
十字キーの左右で移動してスペースキーで攻撃、
チャージショットは廃止、時間経過で回復するゲージ制にしたい。
ボタンでショット切り替え、消費が少ない赤ショット、消費が多い青ショット。
他にも3WAYとかホーミングあったら面白いよね。ガトリング系とかも面白そう。

で、スマホでやる場合、タッチしてから話すまでの時間が短ければショット、
長ければスワイプで移動、みたいにしたら面白そう。

左上：パワーゲージ。ショットを撃つと減る。
右上：ライフゲージ。ダメージを受けると減る。敵を倒したときにライフを落とすことがある。

ゲームオーバーの処理・・
まず、HPが0になったらそのターンの最後にstateをGAMEOVERにして、
スプライトの描画とかどうする・・更新をやめないといけないので。処理を切り分ける必要がある。

そのうちステージ開始時に行う「stageSetup」って関数を作るんだけど、
continueの場合はそれを呼び出す、stage変数はそのまま。
PLAY画面にstageがどこかってのを明示しておきたいというのがひとつ。
で、to titleの場合は、stage変数をリセット。

stageReset: 敵を消す、相手とこちらの攻撃を消す、HPとPWを元に戻す。

一番最初にすることってのをまとめておきたいね。タイトル画面から移動するタイミングで実行する。
とりあえず今すべきことはpw, hpのmaxリセットとcurrentIndexの初期化。

まだ敵の配置とか全然考えていないのでそこは今後何とかしていく感じ・・
バリエーションも単純すぎてつまんないし、不規則移動とか実験してみる必要アリ。
敵配置とかも別枠で色々実験してみよう・・・

別ページにstage_1の仕様書くね。

弾とか画面外に出たときに消滅するように仕様変更
アイテムのアイデア・・
HPが回復する（ピンク20, 赤50, 金色100）
パワーが回復する（オレンジ50, 水色100）
一定時間POWMAXが増えるとか？？弾のスピードいじるとか（ジェット）、ダメージが減るとか・・（盾）
